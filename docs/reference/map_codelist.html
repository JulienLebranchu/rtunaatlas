<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Maps and replaces one dimension of a fact dataset using a dataset of mappings between code lists — map_codelist • rtunaatlas</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rtunaatlas</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ptaconet/rtunaatlas">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Maps and replaces one dimension of a fact dataset using a dataset of mappings between code lists</h1>
    </div>

    
    <p>This function maps one dimension (i.e. column with codes) of a fact dataset to a target code list using a dataset of mappings between code lists. In other words, it makes the correspondance between two code lists for a given dimension, and replaces for this dimension in the fact dataset the old codes by the new codes available in the dataset of mappings between code lists.</p>
    

    <pre class="usage"><span class='fu'>map_codelist</span>(<span class='no'>df_input</span>, <span class='no'>df_mapping</span>, <span class='no'>dimension_to_map</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df_input</th>
      <td><p>a data.frame of fact</p></td>
    </tr>
    <tr>
      <th>df_mapping</th>
      <td><p>a data.frame of code list mapping</p></td>
    </tr>
    <tr>
      <th>dimension_to_map</th>
      <td><p>the name (string) of the dimension to map.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list with two objects:</p><ul>
<li><p>"df": The input data.frame of fact, where the dimension_to_map has been mapped using the df_mapping</p></li>
<li><p>"stats": A data.frame with some information regarding the data not mapped. It provides, for each unit of measure available in the input dataset, the sum and percentage of the data that could not be map because no correspondance are available in the dataset of mappings between code lists</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The data frames of fact and code list mapping must be properly structured. The data.frame of mapping must at least have the 2 following columns:</p><ul>
<li><p>"src_code": The source codes for the dimension to map (i.e. the codes used in the df_input fot the considered dimension)</p></li>
<li><p>"src_target": The target codes for the dimension to map</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other create your own tuna atlas: <code><a href='convert_units.html'>convert_units</a></code>,
  <code><a href='raise_datasets_by_dimension.html'>raise_datasets_by_dimension</a></code>,
  <code><a href='raise_get_rf.html'>raise_get_rf</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>  <span class='co'># Reads IOTC nominal catch dataset (2017 release)</span>
  <span class='no'>iotc_nominal_catch</span><span class='kw'>&lt;-</span><span class='fu'><a href='extract_dataset.html'>extract_dataset</a></span>(<span class='no'>con</span>,<span class='fu'><a href='list_metadata_datasets.html'>list_metadata_datasets</a></span>(<span class='no'>con</span>,<span class='kw'>dataset_name</span><span class='kw'>=</span><span class='st'>"indian_ocean_nominal_catch_1950_01_01_2015_01_01_tunaatlasIOTC_2017_level0"</span>))</div><div class='output co'>#&gt; <span class='error'>Error in nrow(metadata_dataset): impossible de trouver la fonction "list_metadata_datasets"</span></div><div class='input'>  <span class='fu'>head</span>(<span class='no'>iotc_nominal_catch</span>)</div><div class='output co'>#&gt; <span class='error'>Error in head(iotc_nominal_catch): objet 'iotc_nominal_catch' introuvable</span></div><div class='input'>
  <span class='co'># Read a mapping between code lists (in this case, mapping between codes for fishing gears used by the tuna RFMOs and the International Standard Statistical Classification of Fishing Gear)</span>
  <span class='no'>df_mapping</span><span class='kw'>&lt;-</span><span class='fu'><a href='extract_dataset.html'>extract_dataset</a></span>(<span class='no'>con</span>,<span class='fu'><a href='list_metadata_datasets.html'>list_metadata_datasets</a></span>(<span class='no'>con</span>,<span class='kw'>dataset_name</span><span class='kw'>=</span><span class='st'>"codelist_mapping_gear_iotc_isscfg_revision_1"</span>))</div><div class='output co'>#&gt; <span class='error'>Error in nrow(metadata_dataset): impossible de trouver la fonction "list_metadata_datasets"</span></div><div class='input'>  <span class='fu'>head</span>(<span class='no'>df_mapping</span>)</div><div class='output co'>#&gt; <span class='error'>Error in head(df_mapping): objet 'df_mapping' introuvable</span></div><div class='input'>
  <span class='co'># Map code lists. Output is a list with two elements (see section "return")</span>
  <span class='no'>df_mapped</span><span class='kw'>&lt;-</span><span class='fu'>map_codelist</span>(<span class='no'>df_input</span>,<span class='no'>df_mapping</span>,<span class='st'>"gear"</span>)</div><div class='output co'>#&gt; 
#&gt;  mapping dimension gear with code list mapping</div><div class='output co'>#&gt; <span class='error'>Error in is.data.frame(x): objet 'df_input' introuvable</span></div><div class='input'>
  <span class='co'># Get the dataframe mapped: dimension "gear" mapped to ISSCFG. The column "gear" has its values changed compared to the ones before the execution of the function. The codes have been mapped following the dimensions "gear" and "source_authority", since the dataset of mappings between code lists had both dimensions.</span>
  <span class='no'>df_mapped_df</span><span class='kw'>&lt;-</span><span class='no'>df_mapped</span>$<span class='no'>df</span></div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): objet 'df_mapped' introuvable</span></div><div class='input'>  <span class='fu'>head</span>(<span class='no'>df_mapped_df</span>)</div><div class='output co'>#&gt; <span class='error'>Error in head(df_mapped_df): objet 'df_mapped_df' introuvable</span></div><div class='input'>
  <span class='co'># Get information regarding the data that were not mapped.</span>
  <span class='no'>df_mapped</span>$<span class='no'>stats</span></div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): objet 'df_mapped' introuvable</span></div><div class='input'> 
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Paul Taconet, <a href='mailto:paul.taconet@ird.fr'>paul.taconet@ird.fr</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul Taconet.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
