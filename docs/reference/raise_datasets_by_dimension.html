<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a dataset with most complete information using two datasets with partial information — raise_datasets_by_dimension • rtunaatlas</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rtunaatlas</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ptaconet/rtunaatlas">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a dataset with most complete information using two datasets with partial information</h1>
    </div>

    
    <p>This function creates a dataset with most complete information using two datasets with partial information , by crossing the informations available in both datasets.
 It takes as input two datasets, each with partial information, but the full information is available if we consider both datasets. Each dataset used as input misses one dimension, the missing dimension in the dataset n°1 being available in the dataset n°2 and reversely. The functions uses both datasets to create a new dataset with the full information (i.e. with values filled for both dimensions on the dataset).
 The data frames of fact must be properly structured. For structures of data frames, see details and here: <a href='http://'>http://</a>.</p>
    

    <pre class="usage"><span class='fu'>raise_datasets_by_dimension</span>(<span class='no'>df1</span>, <span class='no'>df2</span>, <span class='no'>dimension_missing_df1</span>, <span class='no'>dimension_missing_df2</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df1</th>
      <td><p>a data.frame of fact with one dimension missing (i.e. for this dimension all values are set to UNK), the latter being available in df2.</p></td>
    </tr>
    <tr>
      <th>df2</th>
      <td><p>the same data.frame of fact with another dimension missing, the latter being available in df1.</p></td>
    </tr>
    <tr>
      <th>dimension_missing_df1</th>
      <td><p>string. The name of the dimension missing in df1.</p></td>
    </tr>
    <tr>
      <th>dimension_missing_df2</th>
      <td><p>string. The name of the dimension missing in df2.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In this function, we make the hypothesis that ....? comment décrire ca???? -&gt; cf mail Manu "Formes"
Example:</p><ul>
<li><p><code>df1</code> :  is a dataset where the "flag" dimension is available but the "schooltype" dimension is missing (i.e. in this dataset, all the values of the column "schooltype" are set to UNK)</p></li>
<li><p><code>df2</code> : is a dataset where the "schooltype" dimension is available but the "flag" dimension is missing (i.e. in this dataset, all the values of the column "flag" are set to UNK)</p></li>
</ul>
    <p>The concept of raising the data is the following: in a given stratum S, a fishing country (flag) F has catched a percentage RF <!-- % of the total catches made in this stratum (this information is extracted from the dataset with flag detail, i.e. df1. RF is called the raising factor). In the same stratum S, there has been in total Y tons of catches realized on log school, made by all the fishing countries (this information extracted from the dataset with schooltype detail, i.e. df2). Raising the data means saying that the fishing country F has catched RF * T tons on log school in the stratum S. RF * T is the value raised. --></p>
<p>In the output dataset, both flag and school type dimensions are available for each stratum.</p>
<p>We make the hypothesis that the proportion of catches by schooltype is equal for all the fishing countries.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other create your own tuna atlas: <code><a href='convert_units.html'>convert_units</a></code>,
  <code><a href='map_codelist.html'>map_codelist</a></code>, <code><a href='raise_get_rf.html'>raise_get_rf</a></code>,
  <code><a href='spatial_curation_intersect_areas.html'>spatial_curation_intersect_areas</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Retrieve some IATTC georeferenced times series of catch </span>
<span class='co'># Connect to Sardara DB</span>
<span class='no'>con</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='db_connection_sardara_world.html'>db_connection_sardara_world</a></span>()


<span class='co'># IATTC dataset stratified by schooltype (and not flag)</span>
<span class='no'>dataset_iattc_ce_PSSetType</span><span class='kw'>&lt;-</span><span class='fu'><a href='extract_dataset.html'>extract_dataset</a></span>(<span class='no'>con</span>,<span class='fu'><a href='list_metadata_datasets.html'>list_metadata_datasets</a></span>(<span class='no'>con</span>,<span class='kw'>dataset_name</span><span class='kw'>=</span><span class='st'>"east_pacific_ocean_catch_1958_12_01_2016_01_01_1deg_1m_ps_tunaatlasIATTC_2017_level0__tuna_bySchool"</span>))</div><div class='output co'>#&gt; <span class='error'>Error in nrow(metadata_dataset): impossible de trouver la fonction "list_metadata_datasets"</span></div><div class='input'><span class='fu'>head</span>(<span class='no'>dataset_iattc_ce_PSSetType</span>)</div><div class='output co'>#&gt; <span class='error'>Error in head(dataset_iattc_ce_PSSetType): objet 'dataset_iattc_ce_PSSetType' introuvable</span></div><div class='input'><span class='fu'>unique</span>(<span class='no'>dataset_iattc_ce_PSSetType</span>$<span class='no'>flag</span>) <span class='co'># Note that the column "flag" is all set with "UNK"</span></div><div class='output co'>#&gt; <span class='error'>Error in unique(dataset_iattc_ce_PSSetType$flag): objet 'dataset_iattc_ce_PSSetType' introuvable</span></div><div class='input'><span class='fu'>unique</span>(<span class='no'>dataset_iattc_ce_PSSetType</span>$<span class='no'>schooltype</span>) <span class='co'># Note that the column "schooltype" is detailed</span></div><div class='output co'>#&gt; <span class='error'>Error in unique(dataset_iattc_ce_PSSetType$schooltype): objet 'dataset_iattc_ce_PSSetType' introuvable</span></div><div class='input'>
<span class='co'># Same IATTC datasets, but stratified by flag (and not schooltype)</span>
<span class='no'>dataset_iattc_ce_PSFlag</span><span class='kw'>&lt;-</span><span class='fu'><a href='extract_dataset.html'>extract_dataset</a></span>(<span class='no'>con</span>,<span class='fu'><a href='list_metadata_datasets.html'>list_metadata_datasets</a></span>(<span class='no'>con</span>,<span class='kw'>dataset_name</span><span class='kw'>=</span><span class='st'>"east_pacific_ocean_catch_1958_12_01_2016_01_01_1deg_1m_ps_tunaatlasIATTC_2017_level0__tuna_byFlag"</span>))</div><div class='output co'>#&gt; <span class='error'>Error in nrow(metadata_dataset): impossible de trouver la fonction "list_metadata_datasets"</span></div><div class='input'><span class='fu'>head</span>(<span class='no'>dataset_iattc_ce_PSFlag</span>)</div><div class='output co'>#&gt; <span class='error'>Error in head(dataset_iattc_ce_PSFlag): objet 'dataset_iattc_ce_PSFlag' introuvable</span></div><div class='input'><span class='fu'>unique</span>(<span class='no'>dataset_iattc_ce_PSFlag</span>$<span class='no'>schooltype</span>) <span class='co'># Note that the column "schooltype" is all set with "UNK"</span></div><div class='output co'>#&gt; <span class='error'>Error in unique(dataset_iattc_ce_PSFlag$schooltype): objet 'dataset_iattc_ce_PSFlag' introuvable</span></div><div class='input'><span class='fu'>unique</span>(<span class='no'>dataset_iattc_ce_PSFlag</span>$<span class='no'>flag</span>) <span class='co'># Note that the column "flag" is detailed</span></div><div class='output co'>#&gt; <span class='error'>Error in unique(dataset_iattc_ce_PSFlag$flag): objet 'dataset_iattc_ce_PSFlag' introuvable</span></div><div class='input'>
<span class='co'>## Raise both datasets. In the output dataset, both flag and school type information are available for each stratum. </span>

<span class='no'>dataset_iattc_flag_raised_to_schooltype</span><span class='kw'>&lt;-</span><span class='fu'>raise_datasets_by_dimension</span>(
<span class='kw'>df1</span><span class='kw'>=</span><span class='no'>dataset_iattc_ce_PSFlag</span>,
<span class='kw'>df2</span><span class='kw'>=</span><span class='no'>dataset_iattc_ce_PSSetType</span>,
<span class='kw'>dimension_missing_df1</span><span class='kw'>=</span><span class='st'>"schooltype"</span>,
<span class='kw'>dimension_missing_df2</span><span class='kw'>=</span><span class='st'>"flag"</span>)</div><div class='output co'>#&gt; <span class='error'>Error in eval(expr, envir, enclos): impossible de trouver la fonction "raise_datasets_by_dimension"</span></div><div class='input'>
<span class='fu'>head</span>(<span class='no'>dataset_iattc_flag_raised_to_schooltype</span>$<span class='no'>df</span>)</div><div class='output co'>#&gt; <span class='error'>Error in head(dataset_iattc_flag_raised_to_schooltype$df): objet 'dataset_iattc_flag_raised_to_schooltype' introuvable</span></div><div class='input'><span class='fu'>unique</span>(<span class='no'>dataset_iattc_flag_raised_to_schooltype</span>$<span class='no'>df</span>$<span class='no'>schooltype</span>)</div><div class='output co'>#&gt; <span class='error'>Error in unique(dataset_iattc_flag_raised_to_schooltype$df$schooltype): objet 'dataset_iattc_flag_raised_to_schooltype' introuvable</span></div><div class='input'><span class='fu'>unique</span>(<span class='no'>dataset_iattc_flag_raised_to_schooltype</span>$<span class='no'>df</span>$<span class='no'>flag</span>) <span class='co'># Note that both columns "flag" and "schooltype" are detailed</span></div><div class='output co'>#&gt; <span class='error'>Error in unique(dataset_iattc_flag_raised_to_schooltype$df$flag): objet 'dataset_iattc_flag_raised_to_schooltype' introuvable</span></div><div class='input'>
<span class='fu'>dbDisconnect</span>(<span class='no'>con</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Paul Taconet, <a href='mailto:paul.taconet@ird.fr'>paul.taconet@ird.fr</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul Taconet.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
